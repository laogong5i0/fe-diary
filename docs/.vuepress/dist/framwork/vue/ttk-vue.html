<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基础使用</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.bd479351.css" as="style"><link rel="preload" href="/assets/js/app.fdb74c2a.js" as="script"><link rel="preload" href="/assets/js/2.5ecf9cd9.js" as="script"><link rel="preload" href="/assets/js/3.f9d13812.js" as="script"><link rel="prefetch" href="/assets/js/10.f273e4b6.js"><link rel="prefetch" href="/assets/js/11.43d55840.js"><link rel="prefetch" href="/assets/js/12.17c9349d.js"><link rel="prefetch" href="/assets/js/13.0687effa.js"><link rel="prefetch" href="/assets/js/14.7419d0d7.js"><link rel="prefetch" href="/assets/js/15.49eb6595.js"><link rel="prefetch" href="/assets/js/4.cfa287aa.js"><link rel="prefetch" href="/assets/js/5.50d10a31.js"><link rel="prefetch" href="/assets/js/6.8c3fb0ac.js"><link rel="prefetch" href="/assets/js/7.8750dbf3.js"><link rel="prefetch" href="/assets/js/8.17a92f21.js"><link rel="prefetch" href="/assets/js/9.e076d918.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bd479351.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/vue/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/webpack/" class="nav-link">webpack</a></div><div class="nav-item"><a href="/react/" class="nav-link">react</a></div><div class="nav-item"><a href="/rollup/" class="nav-link">rollup</a></div><div class="nav-item"><a href="/babel/" class="nav-link">babel</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">维护的框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framwork/vue/" class="nav-link router-link-active">vue</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/vue/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/webpack/" class="nav-link">webpack</a></div><div class="nav-item"><a href="/react/" class="nav-link">react</a></div><div class="nav-item"><a href="/rollup/" class="nav-link">rollup</a></div><div class="nav-item"><a href="/babel/" class="nav-link">babel</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">维护的框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framwork/vue/" class="nav-link router-link-active">vue</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/framwork/vue/" class="sidebar-link">ttk-vue</a></li><li><a href="/framwork/vue/ttk-vue.html" class="active sidebar-link">基础使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#框架简介" class="sidebar-link">框架简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#框架特点" class="sidebar-link">框架特点</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#集成了哪些开源组件" class="sidebar-link">集成了哪些开源组件</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#ttk-vue框架整体组成" class="sidebar-link">@ttk/vue框架整体组成</a></li></ul></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#如何快速开始" class="sidebar-link">如何快速开始</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#运行" class="sidebar-link">运行</a></li></ul></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#代码和文件命名规范" class="sidebar-link">代码和文件命名规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#目录结构规范" class="sidebar-link">目录结构规范</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#命名规范" class="sidebar-link">命名规范</a></li></ul></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#常用功能" class="sidebar-link">常用功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#创建路由" class="sidebar-link">创建路由</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#路由组件传参" class="sidebar-link">路由组件传参</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#创建vuex-store模块" class="sidebar-link">创建Vuex store模块</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#利用路由覆盖，重写框架中的页面" class="sidebar-link">利用路由覆盖，重写框架中的页面</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#vuex中两个模块中的action、mutation、state、getters互相调用" class="sidebar-link">Vuex中两个模块中的action、mutation、state、getters互相调用</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#内置工具箱列表" class="sidebar-link">内置工具箱列表</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#内置工具箱的使用" class="sidebar-link">内置工具箱的使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#常用组件-（持续完善中）" class="sidebar-link">常用组件 （持续完善中）</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#使用mock-server" class="sidebar-link">使用Mock Server</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#移除mockserver" class="sidebar-link">移除MockServer</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#设置代理服务器" class="sidebar-link">设置代理服务器</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#使用环境变量配置配置代理" class="sidebar-link">使用环境变量配置配置代理</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#新增一个mock接口" class="sidebar-link">新增一个mock接口</a></li></ul></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#和服务端进行交互" class="sidebar-link">和服务端进行交互</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#数据交互流程" class="sidebar-link">数据交互流程</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#数据交互实例" class="sidebar-link">数据交互实例</a></li></ul></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#构建和发布-多环境切换" class="sidebar-link">构建和发布&amp;多环境切换</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#构建" class="sidebar-link">构建</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#发布" class="sidebar-link">发布</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#前端路由与服务端的结合" class="sidebar-link">前端路由与服务端的结合</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#多环境切换" class="sidebar-link">多环境切换</a></li></ul></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#定制主题" class="sidebar-link">定制主题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#样式覆盖" class="sidebar-link">样式覆盖</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#多套主题实现换肤" class="sidebar-link">多套主题实现换肤</a></li></ul></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#eslint定制" class="sidebar-link">ESlint定制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#eslint属性简介" class="sidebar-link">ESlint属性简介</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#常用的规则配置项" class="sidebar-link">常用的规则配置项</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#取消eslint校验" class="sidebar-link">取消ESLint校验</a></li></ul></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#ajax封装" class="sidebar-link">ajax封装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#请求拦截" class="sidebar-link">请求拦截</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#响应拦截" class="sidebar-link">响应拦截</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#封装get和post方法" class="sidebar-link">封装get和post方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#高级表格" class="sidebar-link">高级表格</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#拖放组件" class="sidebar-link">拖放组件</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#图表组件" class="sidebar-link">图表组件</a></li><li class="sidebar-sub-header"><a href="/framwork/vue/ttk-vue.html#树形控件" class="sidebar-link">树形控件</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="基础使用"><a href="#基础使用" class="header-anchor">#</a> 基础使用</h1> <h2 id="框架简介"><a href="#框架简介" class="header-anchor">#</a> 框架简介</h2> <p><code>@ttk/vue</code>是一个后台前端解决方案，它基于 <a href="https://github.com/vuejs/vue" target="_blank" rel="noopener noreferrer">vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://github.com/fx-mobile/vue-ui" target="_blank" rel="noopener noreferrer">@ttk/vue-ui<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>实现。它使用了最新的前端技术栈，动态路由，权限验证，提炼了典型的业务模型，提供了丰富的功能组件，它可以帮助你快速搭建企业级中后台产品原型。相信不管你的需求是什么，本项目都能帮助到你。</p> <h3 id="框架特点"><a href="#框架特点" class="header-anchor">#</a> 框架特点</h3> <ol><li>去中心化，路由和页面store的操作都统一写在在一个文件夹下，代码结构更清晰，一个页面一个文件夹。</li> <li>支持路由覆盖，业务代码中定义与框架中相同名称的路由名称即可覆盖框架路由。</li> <li>支持重写框架的view层，无需修改store，复用框架中的store。</li> <li>封装了部分常用接口，开发者可以直接使用，也可以自己重新写。</li> <li>保留vue原有特性和数据操作的方法，降低框架学习成本</li> <li>UI在Element-UI V2.12的基础上进行了2次封装，继承Eleemnt-UI所有特性</li> <li>提供一些常用工具集，如日期格式化，phone校验，asjax封装等。</li> <li>自带mock和eslint，无需再配置</li> <li>最低支持IE9</li></ol> <h3 id="集成了哪些开源组件"><a href="#集成了哪些开源组件" class="header-anchor">#</a> 集成了哪些开源组件</h3> <ul><li><p>底层：Vue、Vuex、Vue-router、@ttk/vue-ui</p></li> <li><p>编译打包工具：vue-cli、babel、webpack、eslint</p></li> <li><p>集成工具：cookiejs、axios</p></li></ul> <h3 id="ttk-vue框架整体组成"><a href="#ttk-vue框架整体组成" class="header-anchor">#</a> @ttk/vue框架整体组成</h3> <ul><li>@ttk/vue-ui：基于Element-UI v2.12二次封装的UI框架，继承Element-UI所有功能特点。</li> <li>@ttk/vue-app：基于Vue、Vuex、Vue-Router进行封装的应用框架，该框架为业务层提供了项目初始化功能，开发时无需关注项目的初始化、只需按规范给文件命名和放在指定的位置即可。还对常用页面和接口进行了封装，业务层可复用火重写。</li> <li>@ttk/vue-template：@ttk/vue项目工程模板，用于创建新项目。</li></ul> <h2 id="如何快速开始"><a href="#如何快速开始" class="header-anchor">#</a> 如何快速开始</h2> <h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 克隆项目</span>
<span class="token function">git</span> clone https://github.com/fx-mobile/vue-template.git <span class="token punctuation">[</span>xxx: 你的项目名称<span class="token punctuation">]</span>

<span class="token comment"># 进入项目目录</span>
<span class="token builtin class-name">cd</span> xxx 

<span class="token comment"># 安装依赖</span>
<span class="token function">npm</span> <span class="token function">install</span>

<span class="token comment"># 建议不要用 cnpm 安装 会有各种诡异的bug 可以通过如下操作解决 npm 下载速度慢的问题</span>
<span class="token function">npm</span> <span class="token function">install</span> --registry<span class="token operator">=</span>https://registry.npm.taobao.org

</code></pre></div><blockquote><p>TIP</p> <p>强烈建议不要用直接使用 cnpm 安装，会有各种诡异的 bug，可以通过重新指定 registry 来解决 npm 安装速度慢的问题。若还是不行，可使用 <a href="https://github.com/yarnpkg/yarn" target="_blank" rel="noopener noreferrer">yarn<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 替代 <code>npm</code>。</p> <p>Windows 用户若安装不成功，很大概率是<code>node-sass</code>安装失败，<a href="https://github.com/PanJiaChen/vue-element-admin/issues/24" target="_blank" rel="noopener noreferrer">解决方案<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>另外因为 <code>node-sass</code> 是依赖 <code>python</code>环境的，如果你之前没有安装和配置过的话，需要自行查看一下相关安装教程。</p></blockquote> <h3 id="运行"><a href="#运行" class="header-anchor">#</a> 运行</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 本地开发 启动项目</span>
<span class="token function">npm</span> run dev
</code></pre></div><p>启动完成后会自动打开浏览器访问 <a href="http://localhost:9528/" target="_blank" rel="noopener noreferrer">http://localhost:9528<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>， 你看到下面的页面就代表操作成功了</p> <p><a data-fancybox="" title="1571308308490" href="./images/star/1571126999776.png" rel="external nofollow"><img src="/assets/img/1571126999776.21d4d4b2.png" alt="1571308308490"></a></p> <h2 id="代码和文件命名规范"><a href="#代码和文件命名规范" class="header-anchor">#</a> 代码和文件命名规范</h2> <h3 id="目录结构规范"><a href="#目录结构规范" class="header-anchor">#</a> 目录结构规范</h3> <p>本框架模板已经为你生成了一个完整的项目，在依赖包中已内置了开发时常用接口和页面，下面是整个项目的目录结构。 开发者一般只需要编辑pagas文件夹下的文件即可。</p> <div class="language-js extra-class"><pre class="language-js"><code>├── build                      # 构建相关
├── mock                       # 项目mock 模拟数据
├── publick                      # 静态资源
│   │── favicon<span class="token punctuation">.</span>ico            # favicon图标
│   └── index<span class="token punctuation">.</span>html             # html模板
├── src                        # 源代码
│   ├── api                    # 所有请求
│   ├── assets                 # 静态资源
│   ├── components             # 全局公用组件
│   ├── router                 # 路由
│   ├── store                  # 全局 store管理
│   ├── pages                  # views 所有页面
│   │   ├── page1              # 页面<span class="token number">1</span>
│   │   │   ├── index<span class="token punctuation">.</span>vue      # 页面入口
│   │   │   ├── xxx<span class="token punctuation">.</span>store<span class="token punctuation">.</span>js   # 页面对应store
│   │   │   ├── xxx<span class="token punctuation">.</span>router<span class="token punctuation">.</span>js  # 页面路由
│   │   ├── page2              # 页面<span class="token number">2</span>
│   │   │   ├── index<span class="token punctuation">.</span>vue      # 页面入口
│   │   │   ├── xxx<span class="token punctuation">.</span>store<span class="token punctuation">.</span>js   # 页面对应store
│   │   │   ├── xxx<span class="token punctuation">.</span>router<span class="token punctuation">.</span>js  # 页面路由
│   ├── main<span class="token punctuation">.</span>js                # 入口文件 加载组件 初始化等
│   ├── permission<span class="token punctuation">.</span>js          # 权限管理
│   └── styles<span class="token punctuation">.</span>scss            # 样式初始化入口
├── tests                      # 测试
├── <span class="token punctuation">.</span>env<span class="token punctuation">.</span>xxx                   # 环境变量配置
├── <span class="token punctuation">.</span>eslintrc<span class="token punctuation">.</span>js               # eslint 配置项
├── <span class="token punctuation">.</span>babelrc                   # babel<span class="token operator">-</span>loader 配置
├── <span class="token punctuation">.</span>travis<span class="token punctuation">.</span>yml                # 自动化<span class="token constant">CI</span>配置
├── vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js              # vue<span class="token operator">-</span>cli 配置
├── postcss<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js          # postcss 配置
└── <span class="token keyword">package</span><span class="token punctuation">.</span>json               # <span class="token keyword">package</span><span class="token punctuation">.</span>json
</code></pre></div><h3 id="命名规范"><a href="#命名规范" class="header-anchor">#</a> 命名规范</h3> <p>文件的结构是基本固定不变的，主要是新页面新文件的添加，命名规范也是很重要的一块，文件的命名是中文全拼音，比如（税务人员 -- shuiwurenyuan），一些基本的页面也可以命名为英文名称，请注意这些基本规范</p> <p>页面文件夹命名规范：统一用小写，保证项目有良好的可移植性，可跨平台。Linux 系统是大小写敏感的，而 Windows 系统和 Mac 系统正好相反，大小写不敏感</p> <ul><li>路由命名规范：路由必须是.router.js结尾，如: login.router.js。框架会根据后缀名自动初始化路由。</li> <li>store命名规范：store必须是.store.js结尾，如: user.router.js。</li> <li>页面命名规范：页面入口统一使用index.vue，引入时可以少些文件名</li> <li>类名规范： 必须是大写开头的骆驼拼写发， 如： MockServer</li> <li>变量命名规范： 骆驼拼写法， 如：appName</li> <li>css类名规范： 全小写并使用连字符“-”项链， 如：app- container</li></ul> <p>更多的代码编写规范，我们已经使用ESlint做好配置，开发过程中，ESlint会自动检查。</p> <div class="language- extra-class"><pre class="language-text"><code>// 强制在单行代码块中使用一致的空格 
// 强制在代码块中使用一致的大括号风格 
// 强制使用骆驼拼写法命名约定 
// 要求构造函数首字母大写 
// 强制在逗号前后使用一致的空格 
// 强制使用一致的逗号风格 
// 强制所有控制语句使用一致的括号风格 
// 是否强制文件末尾至少保留一行空行 
// 要求回调函数中有容错处理 
// 强制使用一致的缩进 
// 强制在 JSX 属性中一致地使用双引号或单引号 
// 强制在对象字面量的属性中键和值之间使用一致的间距 
// 强制在关键字前后使用一致的空格 
// 强制在点号之前和之后一致的换行
// 强制使用全等
// 禁用 debugger 
// 要求调用无参构造函数时有圆括号 
// 禁止使用 Array 构造函数 
// 禁用no-console规则
// 禁止条件表达式中出现模棱两可的赋值操作符 
// 禁止 function 定义中出现重名参数 
// 禁止对象字面量中出现重复的 key 
// 禁止出现重复的 case 标签 
// 禁用 eval() 
// 禁止对 catch 子句的参数重新赋值 
// 禁止不必要的 .bind() 调用 
// 禁止不必要的布尔转换 
// 禁止不必要的括号 
// 禁止对 function 声明重新赋值 
// 禁止在嵌套的块中出现变量声明或 function 声明 
// 禁止在字符串和注释之外不规则的空白 
// 禁止把全局对象作为函数调用 
// 禁用稀疏数组 
// 禁止出现令人困惑的多行表达式 
// 禁止在return、throw、continue 和 break语句之后出现不可达代码 
// 要求使用 isNaN() 检查 NaN
// 强制 typeof 表达式与有效的字符串进行比较 
// 禁用不必要的嵌套块 
// 不允许空格和 tab 混合缩进 
// 禁止使用多个空格
// 禁止使用多行字符串 
// 不允许多个空行 
// 禁止调用 require 时使用 new 操作符 
// 禁止对 String，Number 和 Boolean 使用 new 操作符 
// 禁止对 dirname 和 filename进行字符串连接 
// 禁止使用 var 多次声明同一变量 
// 禁止在 return 语句中使用赋值语句 
// 禁止自我赋值 
// 禁止自身比较 
// 禁用逗号操作符 
// 禁止 function 标识符和括号之间出现空格 
// 禁用行尾空格 
// 禁用未声明的变量，除非它们在 /global / 注释中被提到 
// 禁止将变量初始化为 undefined 
// 禁用一成不变的循环条件 
// 禁止出现未使用过的变量 
// 禁止不必要的 .call() 和 .apply() 
// 禁止属性前有空白 
// 强制函数中的变量要么一起声明要么分开声明 
// 强制操作符使用一致的换行符 
// 强制使用一致的反勾号、双引号或单引号 
// 要求或禁止使用分号而不是 ASI 
// 强制分号之前和之后使用一致的空格 
// 强制在圆括号内使用一致的空格
// 要求操作符周围有空格 
// 强制在一元操作符前后使用一致的空格 
// 强制在注释中 // 或 /* 使用一致的空格
</code></pre></div><h2 id="常用功能"><a href="#常用功能" class="header-anchor">#</a> 常用功能</h2> <p>@ttk/vue框架是基于vue + vuex + vue-router进行的封装。主要实现了这三大组件的初始化，让开发在不需要太多的关注框架底层。只需要按vue的规范编写页面即可，达到开箱即用的目的。</p> <p>在框架的底层，我们已经实现了router和store的自动创建，开发者只需要将router和store按框架的约定命名并放在指定的文件夹下即可，框架层会自动帮你的初始化。</p> <h3 id="创建路由"><a href="#创建路由" class="header-anchor">#</a> 创建路由</h3> <p>使用@TTK/vue框架创建路由时，你只需要将路由文件命名为<code>[XXX].router.js</code>，然后将它放置在src/pages/xxxx文件夹下即可，框架将会自动扫描带.router.js后缀名的文件，并将它初始化。例如下面</p> <p><a data-fancybox="" title="1571308308490" href="./images/default/1571308308490.png" rel="external nofollow"><img src="/assets/img/1571308308490.4f8f7b10.png" alt="1571308308490"></a></p> <p>路由index.router.js的配置按vue-router标准配置，例如</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">'@ttkv/packages/layout'</span> <span class="token comment">// 应用框架中的Layout组件，自带菜单和header</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
  component<span class="token punctuation">:</span> Layout<span class="token punctuation">,</span>
  redirect<span class="token punctuation">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
  children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">component</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/pages/1-home'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
      meta<span class="token punctuation">:</span> <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span> icon<span class="token punctuation">:</span> <span class="token string">'fsicon-home'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="路由组件传参"><a href="#路由组件传参" class="header-anchor">#</a> 路由组件传参</h3> <p><strong>使用router-link进行路由导航，传递参数</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 路由定义</span>
<span class="token punctuation">{</span> 
    path<span class="token punctuation">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span> 
    component<span class="token punctuation">:</span> User
<span class="token punctuation">}</span>
</code></pre></div><p>在页面和组件中可以使用 <code>this.$route.params.id</code> 来接受路由参数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>**带参数的跳转：**使用<code>$router.push({path：/child/${id}})</code>可实现带参数的跳转</p> <p>**通过属性传递参数：**通过路由属性中的name来确定匹配的路由，通过params来传递参数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">'childView'</span><span class="token punctuation">,</span>
    params<span class="token punctuation">:</span><span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token number">123</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 种方式子路由配置中必须指定 name属性：</span>
<span class="token punctuation">{</span>
    path<span class="token punctuation">:</span><span class="token string">'/child'</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token string">'childView'</span><span class="token punctuation">,</span>
    component<span class="token punctuation">:</span> child
<span class="token punctuation">}</span>
</code></pre></div><p>**通过query来传递参数：**使用path来匹配路由，然后通过query来传递参数，这种情况下 query传递的参数会显示在url后面?id=？</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/child'</span><span class="token punctuation">,</span>
    query<span class="token punctuation">:</span><span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token number">123</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 在页面中接收参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id

<span class="token comment">// 路由配置如下</span>
<span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/child'</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token string">'child'</span>
    component<span class="token punctuation">:</span> Child
<span class="token punctuation">}</span>

<span class="token comment">// 地址栏： localhost:8000/#/child?id=123</span>

</code></pre></div><h3 id="创建vuex-store模块"><a href="#创建vuex-store模块" class="header-anchor">#</a> 创建Vuex store模块</h3> <p>Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。在@ttk/vue中，我们已经为你集成里Vuex。如果你以前已经使用过vuex，那你只需要查看本下面内容，了解@ttk/vue框架中store的创建有何约定即可开始编写你的Web应用。如果你你未曾接触过Vuex，请移步动<a href="https://vuex.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">Vuex官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>了解更多后再继续阅读下面内容。
在@ttk/vue框架中，框架会自动扫描src/pages文件夹下所有文件名带有.store.js结尾的文件，并自动初始化。例如下图：</p> <p><a data-fancybox="" title="1571308308490" href="./images/default/1571359903196.png" rel="external nofollow"><img src="/assets/img/1571359903196.da8449a9.png" alt="1571308308490"></a></p> <p>在Vuex中，一个最简单的store对象应该包含 state和mutations， 有了这两个属性后，你可以通过 store.state 来获取状态对象，以及通过 store.commit 方法触发状态变更</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 如果在模块化构建系统中，请确保在开头调用了 Vue.use(Vuex)</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">)</span> <span class="token comment">// 使用commit 修改状态</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token comment">// -&gt; 1</span>
</code></pre></div><blockquote><p>注意：Vuex约定所有的数据操作都应该使用commit来提交一个mutation。而非直接改变 <code>store.state.count</code></p></blockquote> <h3 id="利用路由覆盖，重写框架中的页面"><a href="#利用路由覆盖，重写框架中的页面" class="header-anchor">#</a> 利用路由覆盖，重写框架中的页面</h3> <p>在<a href="https://github.com/fx-mobile/vue" target="_blank" rel="noopener noreferrer">@ttk/vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>框架中我们已经为你内置了一些默认的页面，你可以直接使用它，也可以使用路由覆盖替换默认页面。例如<a href="https://github.com/fx-mobile/vue-template" target="_blank" rel="noopener noreferrer">@ttk/vue-template<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>中的login页面。</p> <p>在/pages/login文件夹中定义一个与框架中相同的login路由。并指定到你的页面。如下</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 修改当前path为login可覆盖@ttk/vue框架中的默认路由</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  path<span class="token punctuation">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">'Login'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">component</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/pages/login'</span><span class="token punctuation">)</span> <span class="token comment">// 指定你的页面</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在<a href="https://github.com/fx-mobile/vue-template/blob/master/src/pages/0-login/" target="_blank" rel="noopener noreferrer">login.vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>页面中，你可以自由编写你的页面，并可以调用框架中已有得Store模块。例如</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>login-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form</span><span class="token punctuation">&gt;</span></span>
      .....
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;Login&quot;</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>loginForm<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">valid</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token operator">...</span><span class="token operator">...</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$store
            <span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&quot;tax_user/login&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loginForm<span class="token punctuation">)</span> <span class="token comment">// 直接调用框架中的Store模块</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token operator">...</span><span class="token operator">...</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token operator">...</span><span class="token operator">...</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="vuex中两个模块中的action、mutation、state、getters互相调用"><a href="#vuex中两个模块中的action、mutation、state、getters互相调用" class="header-anchor">#</a> Vuex中两个模块中的action、mutation、state、getters互相调用</h3> <p>在大型应用程序中，状态管理经常变得复杂，因为多个组件之间分散的多个状态以及它们之间的交互。 人们常常忽视Vue实例中的真实来源是原始数据对象–Vue实例只是代理对其的访问。 因此，如果您有一段应该由多个实例共享的状态，则应避免将其复制并通过identity进行共享。</p> <p>框架的数据管理使用的是Vuex，在数据操作上没有改变开发者的使用习惯，沿用的Vuex的所有方法。如果你已经使用过vuex，相信你可以快速上手。</p> <p><strong>例如</strong></p> <p><strong>模块</strong>A:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> api <span class="token keyword">from</span> <span class="token string">'~api'</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
    vip<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
    async <span class="token punctuation">[</span><span class="token string">'get'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">{</span>commit<span class="token punctuation">,</span> state<span class="token punctuation">,</span> dispatch<span class="token punctuation">}</span><span class="token punctuation">,</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> <span class="token punctuation">{</span> code<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'vip/getVipBaseInfo'</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">===</span> <span class="token number">1001</span><span class="token punctuation">)</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'receive'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token string">'receive'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        state<span class="token punctuation">.</span>vip <span class="token operator">=</span> data
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token string">'get'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state<span class="token punctuation">.</span>vip
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    namespaced<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    state<span class="token punctuation">,</span>
    actions<span class="token punctuation">,</span>
    mutations<span class="token punctuation">,</span>
    getters
<span class="token punctuation">}</span>
</code></pre></div><p>模块B</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> api <span class="token keyword">from</span> <span class="token string">'~api'</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
    shop<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
    async <span class="token punctuation">[</span><span class="token string">'get'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">{</span>commit<span class="token punctuation">,</span> state<span class="token punctuation">,</span> dispatch<span class="token punctuation">}</span><span class="token punctuation">,</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> <span class="token punctuation">{</span> code<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'shop/getShopBaseInfo'</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">===</span> <span class="token number">1001</span><span class="token punctuation">)</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'receive'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token string">'receive'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        state<span class="token punctuation">.</span>shop <span class="token operator">=</span> data
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token string">'get'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state<span class="token punctuation">.</span>shop
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    namespaced<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    state<span class="token punctuation">,</span>
    actions<span class="token punctuation">,</span>
    mutations<span class="token punctuation">,</span>
    getters
<span class="token punctuation">}</span>
</code></pre></div><p><strong>模块B的actions调用模块A的state</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
    async <span class="token punctuation">[</span><span class="token string">'shop'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>store<span class="token punctuation">,</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> commit<span class="token punctuation">,</span> dispatch<span class="token punctuation">,</span> state<span class="token punctuation">,</span> rootState <span class="token punctuation">}</span> <span class="token operator">=</span> store
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rootState<span class="token punctuation">)</span> <span class="token comment">// 打印根 state</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rootState<span class="token punctuation">.</span>vip<span class="token punctuation">)</span> <span class="token comment">// 打印其他模块的 state</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> <span class="token punctuation">{</span> code<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'shop/getShopBaseInfo'</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">===</span> <span class="token number">1001</span><span class="token punctuation">)</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'receive'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>actions 中的 shop 方法, 有 2 个参数, 第一个是 store, 第二个是 dispatch 调用时传过来的参数，
store 这个对象又包含了 4 个键, 其中 commit 是调用 mutations 用的, dispatch 是调用 actions 用的, state 是当前模块的 state, 而 rootState 是根 state, 既然能拿到根 state, 想取其他模块的 state就简单了。</p> <p><strong>模块 B 的 actions 里调用模块 A 的 actions</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
    async <span class="token punctuation">[</span><span class="token string">'shop'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>store<span class="token punctuation">,</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> commit<span class="token punctuation">,</span> dispatch<span class="token punctuation">,</span> state<span class="token punctuation">,</span> rootState <span class="token punctuation">}</span> <span class="token operator">=</span> store
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> <span class="token punctuation">{</span> code<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'shop/getShopBaseInfo'</span><span class="token punctuation">,</span> config<span class="token punctuation">,</span> <span class="token string">'get'</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">===</span> <span class="token number">1001</span><span class="token punctuation">)</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'receive'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment">// 调用当前模块的 mutations</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'vip/get'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>root<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 调用其他模块的 actions</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面的代码中dispatch('vip/vip', {}, {root: true})就是在模块 B 调用 模块 A 的 actions, 有 3 个参数, 第一个参数是其他模块的 actions 路径, 第二个是传给 actions 的数据, 如果不需要传数据, 也必须预留, 第三个参数是配置选项, 申明这个 acitons 不是当前模块的</p> <p><strong>模块B的actions里调用模块A的mutaions</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
    async <span class="token punctuation">[</span><span class="token string">'shop'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>store<span class="token punctuation">,</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> commit<span class="token punctuation">,</span> dispatch<span class="token punctuation">,</span> state<span class="token punctuation">,</span> rootState <span class="token punctuation">}</span> <span class="token operator">=</span> store
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> <span class="token punctuation">{</span> code<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'shop/getShopBaseInfo'</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">===</span> <span class="token number">1001</span><span class="token punctuation">)</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'receive'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment">// 调用当前模块的 mutations</span>
            <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'vip/receive'</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token punctuation">{</span>root<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 调用其他模块的 mutations</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面的代码中commit('vip/receive', {}, {root: true})就是在模块 B 调用 模块 A 的 mutations, 有 3 个参数, 第一个参数是其他模块的 mutations 路径, 第二个是传给 mutations 的数据, 如果不需要传数据, 也必须预留, 第三个参数是配置选项, 申明这个 mutations 不是当前模块的.</p> <p><strong>模块B的actions里调用模块A的getters</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
    async <span class="token punctuation">[</span><span class="token string">'shop'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>store<span class="token punctuation">,</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> commit<span class="token punctuation">,</span> dispatch<span class="token punctuation">,</span> state<span class="token punctuation">,</span> rootState<span class="token punctuation">,</span> rootGetters <span class="token punctuation">}</span> <span class="token operator">=</span> store
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rootGetters<span class="token punctuation">[</span><span class="token string">'vip/get'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 打印其他模块的 getters</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> <span class="token punctuation">{</span> code<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'shop/getShopBaseInfo'</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">===</span> <span class="token number">1001</span><span class="token punctuation">)</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'receive'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们来看下上面的代码, 相比之前的代码, store 又多了一个键: rootGetters
rootGetters 就是 vuex 中所有的 getters, 你可以用 <code>rootGetters['xxxxx']</code> 来取其他模块的getters</p> <h3 id="内置工具箱列表"><a href="#内置工具箱列表" class="header-anchor">#</a> 内置工具箱列表</h3> <p>为了能给开发者提供一个开箱即用、高效的框架，我们在框架中内置了一下常用的工具。</p> <div class="language-js extra-class"><pre class="language-js"><code>@ttk<span class="token operator">/</span>vue
├── uitls
│   ├── index<span class="token punctuation">.</span>js
│   ├── auth<span class="token punctuation">.</span>js
│   ├── local<span class="token operator">-</span>storage<span class="token punctuation">.</span>js
│   ├── open<span class="token operator">-</span>window<span class="token punctuation">.</span>js
│   ├── validate<span class="token punctuation">.</span>js
</code></pre></div><h4 id="index-js工具"><a href="#index-js工具" class="header-anchor">#</a> index.js工具</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * Parse the time to string
 * @param {(Object|string|number)} time
 * @param {string} cFormat
 * @returns {string}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">parseTime</span><span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> cFormat</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {number} time
 * @param {string} option
 * @returns {string}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">formatTime</span><span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> option</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {string} url
 * @returns {Object}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getQueryObject</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> 

<span class="token comment">/**
 * @param {string} input value
 * @returns {number} output value
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">byteLength</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {Array} actual
 * @returns {Array}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">cleanArray</span><span class="token punctuation">(</span><span class="token parameter">actual</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {Object} json
 * @returns {Array}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">param</span><span class="token punctuation">(</span><span class="token parameter">json</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {string} url
 * @returns {Object}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">param2Obj</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {string} val
 * @returns {string}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">html2Text</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * Merges two objects, giving the last one precedence
 * @param {Object} target
 * @param {(Object|Array)} source
 * @returns {Object}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">objectMerge</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> source</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {HTMLElement} element
 * @param {string} className
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> className</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {string} type
 * @returns {Date}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getTime</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {Function} func
 * @param {number} wait
 * @param {boolean} immediate
 * @return {*}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait<span class="token punctuation">,</span> immediate</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * This is just a simple version of deep copy
 * Has a lot of edge cases bug
 * If you want to use a perfect deep copy, use lodash's _.cloneDeep
 * @param {Object} source
 * @returns {Object}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {Array} arr
 * @returns {Array}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">uniqueArr</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @returns {string}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">createUniqueString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 

<span class="token comment">/**
 * Check if an element has a class
 * @param {HTMLElement} elm
 * @param {string} cls
 * @returns {boolean}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> cls</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * Add class to element
 * @param {HTMLElement} elm
 * @param {string} cls
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">addClass</span><span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> cls</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * Remove class from element
 * @param {HTMLElement} elm
 * @param {string} cls
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> cls</span><span class="token punctuation">)</span>

</code></pre></div><h4 id="auth-js工具"><a href="#auth-js工具" class="header-anchor">#</a> auth.js工具</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取tokeng</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 设置tokeng</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">setToken</span><span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> 
<span class="token comment">// 删除tokeng</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">removeToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="local-storage-js工具"><a href="#local-storage-js工具" class="header-anchor">#</a> local-storage.js工具</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 添加一个对象</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">setItem</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span>
<span class="token comment">// 删除一个对象</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getItem</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="open-window-js"><a href="#open-window-js" class="header-anchor">#</a> open-window.js</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 打开一个新窗口</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">openWindow</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> title<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h</span><span class="token punctuation">)</span> 
</code></pre></div><h4 id="validate-js"><a href="#validate-js" class="header-anchor">#</a> validate.js</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 使用正则表达判断一个链接 return /^(https?:|mailto:|tel:)/.test(path)
 * @param {string} path
 * @returns {Boolean}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">isExternal</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> 

<span class="token comment">/**
 * return /^1[3456789]\d{9}$/.test(phone)
 * @param {string} phone
 * @returns {Boolean}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">validPhone</span><span class="token punctuation">(</span><span class="token parameter">phone</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {string} url
 * @returns {Boolean}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">validURL</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {string} str
 * @returns {Boolean}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">validLowerCase</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {string} str
 * @returns {Boolean}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">validUpperCase</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {string} str
 * @returns {Boolean}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">validAlphabets</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {string} email
 * @returns {Boolean}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">validEmail</span><span class="token punctuation">(</span><span class="token parameter">email</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * @param {string} str
 * @returns {Boolean}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">isString</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> 

<span class="token comment">/**
 * @param {Array} arg
 * @returns {Boolean}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">isArray</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="内置工具箱的使用"><a href="#内置工具箱的使用" class="header-anchor">#</a> 内置工具箱的使用</h3> <p>@ttk/vue内置的工具的引用如下。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>getToken<span class="token punctuation">,</span> setToken<span class="token punctuation">,</span> removeToken<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ttkv/lib/utils/auth'</span>

<span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>@ttkv是框架的@ttk/vue的别名。已经在vue.config.js中配置好。请勿修改。</p></blockquote> <h2 id="常用组件-（持续完善中）"><a href="#常用组件-（持续完善中）" class="header-anchor">#</a> 常用组件 （持续完善中）</h2> <h2 id="使用mock-server"><a href="#使用mock-server" class="header-anchor">#</a> 使用Mock Server</h2> <p>Mock 数据是前端开发过程中必不可少的一环，是分离前后端开发的关键链路。通过预先跟服务器端约定好的接口，模拟请求数据甚至逻辑，能够让前端开发更加独立自主，不会被服务端的开发所阻塞。</p> <h3 id="移除mockserver"><a href="#移除mockserver" class="header-anchor">#</a> 移除MockServer</h3> <p>框架内置了mock-server，本地开发时会自动启动。 如果你不想使用<code>mock-server</code>的话只要在根目录中的<code>vue.config.js</code>中移除<code>webpack-dev-server</code>中<code>proxy</code>和<code>after</code>这个<code>Middleware</code>就可以了。</p> <p>例如</p> <p><a data-fancybox="" title="1571308308490" href="./images/mock/1571128462805.png" rel="external nofollow"><img src="/assets/img/1571128462805.f4725454.png" alt="1571308308490"></a></p> <h3 id="设置代理服务器"><a href="#设置代理服务器" class="header-anchor">#</a> 设置代理服务器</h3> <p>开发过程中，我们经常会调用后台不同环境下的接口。这时我们可以通过代理的方式来指定我们接口调用的是哪个域名下的接口。如果后台接口不支持cors模式，代理还能办你解决跨域的问题。</p> <p><strong>如下配置将会被代理到指定的域名下</strong></p> <p><a data-fancybox="" title="1571308308490" href="./images/mock/1571213270704.png" rel="external nofollow"><img src="/assets/img/1571213270704.4a4ad612.png" alt="1571308308490"></a></p> <h3 id="使用环境变量配置配置代理"><a href="#使用环境变量配置配置代理" class="header-anchor">#</a> 使用环境变量配置配置代理</h3> <p>@ttk/vue框架是基于vue-cli来进行构建的，所有你在在<code>@TTK/vue</code>的工程模板中，我们可以找到<code>.env.development</code>和<code>.env.production</code>、<code>.env.stagin</code>文件。你可以根据不同的开发环境设置不同的代理配置。通过配置环境变量，你可以在不同环境中使用不同的代理。</p> <p>例如配置<a href="https://github.com/fx-mobile/vue-template/blob/master/.env.development" target="_blank" rel="noopener noreferrer">.development<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>环境变量</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 自定义环境变量, 变量必须是VUE_APP开头</span>
VUE_APP_JCHL_API <span class="token operator">=</span> <span class="token string">'/gateway'</span>
</code></pre></div><p>然后在<a href="https://github.com/fx-mobile/vue-template/blob/master/vue.config.js" target="_blank" rel="noopener noreferrer">vue.config.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的<code>proxy</code>中增加一个属性</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_JCHL_API</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">:</span> <span class="token string">'https://tjspt.jchl.com'</span><span class="token punctuation">,</span>
        changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token punctuation">[</span><span class="token string">'^/'</span> <span class="token operator">+</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_JCHL_API</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">''</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后在调用接口时使用环境变量</p> <p><a data-fancybox="" title="1571308308490" href="./images/mock/1571385706900.png" rel="external nofollow"><img src="/assets/img/1571385706900.6f5f60bb.png" alt="1571308308490"></a></p> <blockquote><p>如果你想在调用接口时，不同环境代理到不同的后台服务器，你可以使用环境变量轻松实现。</p></blockquote> <h3 id="新增一个mock接口"><a href="#新增一个mock接口" class="header-anchor">#</a> 新增一个mock接口</h3> <p>如果你想添加 mock 数据，只要在根本录下找到<code>mock</code>文件，添加对应的路由，对其进行拦截和模拟数据即可。</p> <p>比如我现在在<a href="https://github.com/fx-mobile/vue-template/blob/master/src/api/table.js" target="_blank" rel="noopener noreferrer">src/api/table<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>中需要添加一个查询某篇文章下面评论数的接口<code>fetchComments</code>，首先新建接口：</p> <blockquote><p>接口的前缀必须跟你在vue.config.js里设置的代理相同。这里设置的是dev-api</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@ttkv/lib/utils/request'</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token punctuation">:</span> <span class="token string">'dev-api/table/list'</span><span class="token punctuation">,</span>
    method<span class="token punctuation">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
    params
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>声明完接口之后，我们需要找到对应的 mock 文件夹<a href="https://github.com/fx-mobile/vue-template/blob/master/mock/table.js" target="_blank" rel="noopener noreferrer">mock/table.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，在下面创建一个能拦截路由的 mock 接口</p> <p>请注意，mock 拦截是基于路由来做的，请确 mock 数据一定能匹配你的 api 保路由，支持正则</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Mock <span class="token keyword">from</span> <span class="token string">'mockjs'</span>

<span class="token keyword">const</span> data <span class="token operator">=</span> Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">'items|30'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token string">'@id'</span><span class="token punctuation">,</span>
    title<span class="token punctuation">:</span> <span class="token string">'@sentence(10, 20)'</span><span class="token punctuation">,</span>
    <span class="token string">'status|1'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'published'</span><span class="token punctuation">,</span> <span class="token string">'draft'</span><span class="token punctuation">,</span> <span class="token string">'deleted'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>
    display_time<span class="token punctuation">:</span> <span class="token string">'@datetime'</span><span class="token punctuation">,</span>
    pageviews<span class="token punctuation">:</span> <span class="token string">'@integer(300, 5000)'</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    url<span class="token punctuation">:</span> <span class="token string">'/table/list'</span><span class="token punctuation">,</span>
    type<span class="token punctuation">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">response</span><span class="token punctuation">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> items <span class="token operator">=</span> data<span class="token punctuation">.</span>items
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        body<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          total<span class="token punctuation">:</span> items<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
          items<span class="token punctuation">:</span> items
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        head<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          errorCode<span class="token punctuation">:</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
          data<span class="token punctuation">:</span> <span class="token keyword">null</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="和服务端进行交互"><a href="#和服务端进行交互" class="header-anchor">#</a> 和服务端进行交互</h2> <h3 id="数据交互流程"><a href="#数据交互流程" class="header-anchor">#</a> 数据交互流程</h3> <p>在 <code>@ttk/vue</code> 中，一个完整的前端 UI 交互到服务端处理流程是这样的：</p> <ol><li>在页面中利用dispatch调用Store模块中对用的action函数。</li> <li>在action函数中调用ajax请求函数。</li> <li>ajax请求返回后在actions函数中调用commit函数更新state，</li> <li>如果页面中已经绑定state，页面将自动更新。</li></ol> <h3 id="数据交互实例"><a href="#数据交互实例" class="header-anchor">#</a> 数据交互实例</h3> <p>为了方便管理维护和分工合作，框架规定api放置在对应的页面文件夹中，按页面进行划分。例如login页面。</p> <p><a data-fancybox="" title="1571308308490" href="./images/server/1571365721457.png" rel="external nofollow"><img src="/assets/img/1571365721457.24dd1eb4.png" alt="1571308308490"></a></p> <p>下面是一个完整的调用实例。详情可查看<a href="https://github.com/fx-mobile/vue-template/tree/master/src/pages/0-login" target="_blank" rel="noopener noreferrer">login页面<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ol><li>首先定义开一个调用后的接口</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// api.js</span>
<span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@ttkv/lib/utils/request'</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_JCHL_API</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/org/back/userService/loginExt?appId=10001006&amp;requestId=2c3b44751ae520bcfe56a7b782cb548b</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    method<span class="token punctuation">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
    data
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>定义store模块，并在store模块中调用login函数</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> login<span class="token punctuation">,</span> logout <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./api'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getToken<span class="token punctuation">,</span> setToken<span class="token punctuation">,</span> removeToken <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ttkv/lib/utils/auth'</span>
<span class="token comment">// import { resetRouter } from '@/router'</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
  token<span class="token punctuation">:</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">SET_TOKEN</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> token</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>token <span class="token operator">=</span> token
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// user login</span>
  <span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> userInfo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> loginName<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> userInfo
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 调用api中的login函数</span>
      <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{</span> loginName<span class="token punctuation">:</span> loginName<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> password<span class="token punctuation">:</span> password <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token operator">...</span>
        <span class="token comment">// 使用commit更新state。</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  namespaced<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  state<span class="token punctuation">,</span>
  mutations<span class="token punctuation">,</span>
  actions
<span class="token punctuation">}</span>

</code></pre></div><ol start="3"><li>在页面中调用actions.</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.vue</span>
methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>loginForm<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">valid</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$store
            <span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&quot;tax_user/login&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loginForm<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token operator">...</span><span class="token punctuation">.</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>如果页面上需要绑定数据，可参考下面实例。在页面中的computed属性中使用vuex的mapState绑定state。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">userName</span><span class="token punctuation">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>tax_user<span class="token punctuation">.</span>info<span class="token punctuation">.</span>name<span class="token punctuation">,</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="构建和发布-多环境切换"><a href="#构建和发布-多环境切换" class="header-anchor">#</a> 构建和发布&amp;多环境切换</h2> <h3 id="构建"><a href="#构建" class="header-anchor">#</a> 构建</h3> <p>当项目开发完毕，只需要运行一行命令就可以打包你的应用：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 打包正式环境</span>
<span class="token function">npm</span> run build:prod

<span class="token comment"># 打包预发布环境</span>
<span class="token function">npm</span> run build:stage
</code></pre></div><p>构建打包成功之后，会在根目录生成 <code>dist</code> 文件夹，里面就是构建打包好的文件，通常是 <code>***.js</code> 、<code>***.css</code>、<code>index.html</code> 等静态文件。</p> <p>如果需要自定义构建，比如指定 <code>dist</code> 目录等，则需要通过 <a href="https://github.com/fx-mobile/vue-template/blob/master/vue.config.js" target="_blank" rel="noopener noreferrer">config<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的 <code>outputDir</code> 进行配置。</p> <h3 id="发布"><a href="#发布" class="header-anchor">#</a> 发布</h3> <p>对于发布来讲，只需要将最终生成的静态文件，也就是通常情况下 <code>dist</code> 文件夹的静态文件发布到你的 cdn 或者静态服务器即可，需要注意的是其中的 <code>index.html</code> 通常会是你后台服务的入口页面，在确定了 js 和 css 的静态之后可能需要改变页面的引入路径。</p> <blockquote><p>部署时可能会发现资源路径不对 ,只需修改 <code>vue.config.js</code> 文件资源路径即可</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>publicPath<span class="token punctuation">:</span> <span class="token string">'./'</span> <span class="token comment">//请根据自己路径来配置更改</span>
</code></pre></div><h3 id="前端路由与服务端的结合"><a href="#前端路由与服务端的结合" class="header-anchor">#</a> 前端路由与服务端的结合</h3> <p>在@ttk/vue中， 前端路由使用的是 <code>vue-router</code>，所以你可以选择两种方式：<code>browserHistory</code> 和 <code>hashHistory</code>。</p> <p>两者的区别简单来说是对路由方式的处理不一样，<code>hashHistory</code> 是以 <code>#</code> 后面的路径进行处理，通过 <a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API" target="_blank" rel="noopener noreferrer">HTML 5 History<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 进行前端路由管理，而 <code>browserHistory</code> 则是类似我们通常的页面访问路径，并没有 <code>#</code>，但要通过服务端的配置，能够访问指定的 url 都定向到当前页面，从而能够进行前端的路由管理。</p> <p>本项目默认使用的是 <code>hashHistory</code> ，所以如果你的 url 里有 <code>#</code>，想去掉的话，需要切换为 <code>browserHistory</code>。 修改 <code>src/router/index.js</code> 中的 mode 即可</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// mode: 'history', //后端支持可开</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>如果你使用的是静态站点，那么使用 <code>browserHistory</code> 可能会无法访问你的应用，因为假设你访问 <code>http://localhost:9527/dashboard</code>，那么其实你的静态服务器并没有能够映射的文件，而使用 <code>hashHistory</code> 则不会有这个问题，因为它的页面路径是以 <code>#</code> 开始的，所有访问都在前端完成，如：<code>http://localhost:9527/#/dashboard/</code>。</p> <p>不过如果你有对应的后台服务器，那么我们推荐采用 <code>browserHistory</code>，只需要在服务端做一个映射，比如： Nginx</p> <div class="language- extra-class"><pre class="language-text"><code>location / {
  try_files $uri $uri/ /index.html;
}
</code></pre></div><blockquote><p>更多配置请查看 <a href="https://router.vuejs.org/zh-cn/essentials/history-mode.html" target="_blank" rel="noopener noreferrer">vue-router 文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h3 id="多环境切换"><a href="#多环境切换" class="header-anchor">#</a> 多环境切换</h3> <p>@ttk/vue框架是基于vue-cli进行编译的。你可以使用下面的命令来切换不同的环境。</p> <p>开发环境使用</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run dev
</code></pre></div><p>预发布环境使用</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run build:stage
</code></pre></div><p>生成环境使用</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run build:prod
</code></pre></div><p>@ttk/vue框架中，你还可以使用预览模式</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run preview
</code></pre></div><blockquote><p>如果需要在不同环境使用不同代理，请参考<code>使用环境变量配置配置代理</code>章节设置不同代理。</p></blockquote> <h1 id="进阶使用"><a href="#进阶使用" class="header-anchor">#</a> 进阶使用</h1> <h2 id="定制主题"><a href="#定制主题" class="header-anchor">#</a> 定制主题</h2> <p>本框架的UI框架是基于Element-ui做的二次封装， 如果对视觉风格有额外的要求可以按照<a href="http://element-cn.eleme.io/#/zh-CN/component/custom-theme" target="_blank" rel="noopener noreferrer">官方自定义主题指导<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。该方案是通过样式变量覆盖的方式 。</p> <h3 id="样式覆盖"><a href="#样式覆盖" class="header-anchor">#</a> 样式覆盖</h3> <p>element-ui 的通用样式变量可能无法满足所有定制需求，你可以通过覆盖默认的组件样式的方式实现。 由于 element-ui 的样式我们是在全局引入的，所以你想在某个<code>view</code>里面覆盖它的样式就不能加 scoped，但你又想只覆盖这个页面的 element 样式，你就可在它的父级加一个 class，以用命名空间来解决问题。</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token comment">/* 你的命名空间 */</span>
<span class="token selector">.article-page </span><span class="token punctuation">{</span>
  <span class="token comment">/* element-ui 元素 */</span>
  <span class="token selector">.el-tag </span><span class="token punctuation">{</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="多套主题实现换肤"><a href="#多套主题实现换肤" class="header-anchor">#</a> 多套主题实现换肤</h3> <p>本方法就是最常见的换肤方式，本地存放多套主题，两者有不同的命名空间，如写两套主题，一套叫 <code>day-theme</code> ，一套叫 <code>night-theme</code> ，<code>night-theme</code> 主题都在一个 <code>.night-theme</code> 的命名空间下，我们动态的在 body 上 add <code>.night-theme</code> ; remove <code>.night-theme</code></p> <p>使用</p> <blockquote><p>我们这里基于官方的主题生成库 <a href="https://github.com/ElementUI/element-theme" target="_blank" rel="noopener noreferrer">element-theme<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 进行了相应的改造。</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>git@github.com:PanJiaChen/custom-element-theme.git
</code></pre></div><p>之后全局安装主题生成工具</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i element-theme -g
</code></pre></div><p>进入项目目录 安装相关依赖</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre></div><p>首先执行 <code>et -i</code> 生成 <code>element-variables.scss</code> 存放样式变量的文件，然后进入 <code>element-variables.scss</code> 文件 修改你自己需要的变量，修改完成之后执行 <code>et</code> ， 编译主题，最后执行<code>gulp</code> 生成命名空间。所有生成文件在 <code>dist</code> 目录下，你只需复制文件下所有内容到 <code>vue-element-admin</code> 项目中 <code>src/assets/custom-theme</code> 进行覆盖替换就行</p> <blockquote><p>如果需要修改打包生成样式命名空间的名字 只要修改该<a href="https://github.com/PanJiaChen/custom-element-theme/blob/master/gulpfile.js#L6" target="_blank" rel="noopener noreferrer">变量<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>即可</p></blockquote> <p><a data-fancybox="" title="1571308308490" href="./images/theme/0726b472-90f4-4fe9-a665-26fb8f9795c3.gif" rel="external nofollow"><img src="/assets/img/0726b472-90f4-4fe9-a665-26fb8f9795c3.68375a93.gif" alt="1571308308490"></a></p> <h2 id="eslint定制"><a href="#eslint定制" class="header-anchor">#</a> ESlint定制</h2> <p>在@ttk/vue框架中，我们已经内置了ESlint。如果你想修改ESLint的配置，可在项目中的根目录中找到<a href="https://github.com/fx-mobile/vue-template/blob/master/.eslintrc.js" target="_blank" rel="noopener noreferrer">.eslintrc.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>文件，对该文件进行相应的修改即可定制属于你的eslint规则。</p> <h3 id="eslint属性简介"><a href="#eslint属性简介" class="header-anchor">#</a> ESlint属性简介</h3> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
root<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 标识当前配置文件为eslint的根配置文件，让其停止在父级目录中继续寻找。</span>
  parserOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">//解析器选项</span>
    parser<span class="token punctuation">:</span> <span class="token string">'babel-eslint'</span><span class="token punctuation">,</span><span class="token comment">// 解析器</span>
    sourceType<span class="token punctuation">:</span> <span class="token string">'module'</span><span class="token comment">// 指定模块化方式</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  env<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// 环境变量</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'plugin:vue/recommended'</span><span class="token punctuation">,</span> <span class="token string">'eslint:recommended'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 规则继承</span>
  <span class="token comment">/**
  * 自定义规则
  * http://eslint.cn/docs/user-guide/configuring#configuring-rules
  * 基本使用方式
  * &quot;off&quot; 或者0 关闭规则
  * &quot;warn&quot; 或者1 将规则打开为警告（不影响退出代码）
  * &quot;error&quot; 或者2 将规则打开为错误（触发时退出代码为1）
  * 如：'no-restricted-syntax': 0, // 表示关闭该规则
  * []如果某项规则，有额外的选项，可以通过数组进行传递，而数组的第一位必须是错误级别。如0,1,2
  * 如 'semi': ['error', 'never'], never就是额外的配置项
  */</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="常用的规则配置项"><a href="#常用的规则配置项" class="header-anchor">#</a> 常用的规则配置项</h3> <p>下面是框架中已内置ESlint配置项，如果你需要修改可以查看<a href="https://github.com/fx-mobile/vue-template/blob/master/.eslintrc.js" target="_blank" rel="noopener noreferrer">.eslintrc.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>文件</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;block-spacing&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;always&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 强制在单行代码块中使用一致的空格 </span>
    <span class="token property">&quot;brace-style&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;1tbs&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">//强制在代码块中使用一致的大括号风格 </span>
      <span class="token property">&quot;allowSingleLine&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;camelcase&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 强制使用骆驼拼写法命名约定 </span>
      <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token string">&quot;always&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;new-cap&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 要求构造函数首字母大写 </span>
      <span class="token property">&quot;newIsCap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;capIsNew&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;comma-spacing&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 强制在逗号前后使用一致的空格 </span>
      <span class="token property">&quot;before&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;after&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;comma-style&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;last&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//强制使用一致的逗号风格 </span>
    <span class="token property">&quot;curly&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;multi-line&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 强制所有控制语句使用一致的括号风格 </span>
    <span class="token property">&quot;eol-last&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//是否强制文件末尾至少保留一行空行 </span>
    <span class="token property">&quot;generator-star-spacing&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;before&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;after&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;handle-callback-err&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;^(err|error)$&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//要求回调函数中有容错处理 </span>
    <span class="token property">&quot;indent&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 强制使用一致的缩进 </span>
      <span class="token property">&quot;SwitchCase&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;jsx-quotes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;prefer-single&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//强制在 JSX 属性中一致地使用双引号或单引号 </span>
    <span class="token property">&quot;key-spacing&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 强制在对象字面量的属性中键和值之间使用一致的间距 </span>
      <span class="token property">&quot;beforeColon&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;afterColon&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;keyword-spacing&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 强制在关键字前后使用一致的空格 </span>
      <span class="token property">&quot;before&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;after&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dot-location&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;property&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 强制在点号之前和之后一致的换行</span>
    <span class="token property">&quot;eqeqeq&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;always&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token property">&quot;null&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ignore&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//强制使用全等</span>
    <span class="token property">&quot;no-debugger&quot;</span><span class="token operator">:</span> process.env.NODE_ENV === <span class="token string">&quot;production&quot;</span> ? <span class="token number">2</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 debugger </span>
    <span class="token property">&quot;new-parens&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">//要求调用无参构造函数时有圆括号 </span>
    <span class="token property">&quot;no-array-constructor&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止使用 Array 构造函数 </span>
    <span class="token property">&quot;no-console&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 禁用no-console规则</span>
    <span class="token property">&quot;no-cond-assign&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">//禁止条件表达式中出现模棱两可的赋值操作符 </span>
    <span class="token property">&quot;no-dupe-args&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">//禁止 function 定义中出现重名参数 </span>
    <span class="token property">&quot;no-dupe-keys&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止对象字面量中出现重复的 key </span>
    <span class="token property">&quot;no-duplicate-case&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">//禁止出现重复的 case 标签 </span>
    <span class="token property">&quot;no-eval&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 eval() </span>
    <span class="token property">&quot;no-ex-assign&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止对 catch 子句的参数重新赋值 </span>
    <span class="token property">&quot;no-extra-bind&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止不必要的 .bind() 调用 </span>
    <span class="token property">&quot;no-extra-boolean-cast&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">//禁止不必要的布尔转换 </span>
    <span class="token property">&quot;no-extra-parens&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;functions&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//禁止不必要的括号 </span>
    <span class="token property">&quot;no-func-assign&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">//禁止对 function 声明重新赋值 </span>
    <span class="token property">&quot;no-inner-declarations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;functions&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 禁止在嵌套的块中出现变量声明或 function 声明 </span>
    <span class="token property">&quot;no-irregular-whitespace&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止在字符串和注释之外不规则的空白 </span>
    <span class="token property">&quot;no-obj-calls&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止把全局对象作为函数调用 </span>
    <span class="token property">&quot;no-sparse-arrays&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁用稀疏数组 </span>
    <span class="token property">&quot;no-unexpected-multiline&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止出现令人困惑的多行表达式 </span>
    <span class="token property">&quot;no-unreachable&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止在return、throw、continue 和 break语句之后出现不可达代码 </span>
    <span class="token property">&quot;use-isnan&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 要求使用 isNaN() 检查 NaN</span>
    <span class="token property">&quot;valid-typeof&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 强制 typeof 表达式与有效的字符串进行比较 </span>
    <span class="token property">&quot;no-lone-blocks&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">//禁用不必要的嵌套块 </span>

    <span class="token property">&quot;no-multi-spaces&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止使用多个空格</span>
    <span class="token property">&quot;no-multi-str&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止使用多行字符串 </span>
    <span class="token property">&quot;no-multiple-empty-lines&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 不允许多个空行 </span>
      <span class="token property">&quot;max&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;no-new-require&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止调用 require 时使用 new 操作符 </span>
    <span class="token property">&quot;no-new-wrappers&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止对 String，Number 和 Boolean 使用 new 操作符 </span>
    <span class="token property">&quot;no-path-concat&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止对 dirname 和 filename进行字符串连接 </span>
    <span class="token property">&quot;no-redeclare&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止使用 var 多次声明同一变量 </span>
    <span class="token property">&quot;no-return-assign&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;except-parens&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 禁止在 return 语句中使用赋值语句 </span>
    <span class="token property">&quot;no-self-assign&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止自我赋值 </span>
    <span class="token property">&quot;no-self-compare&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止自身比较 </span>
    <span class="token property">&quot;no-sequences&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁用逗号操作符 </span>
    <span class="token property">&quot;no-spaced-func&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止 function 标识符和括号之间出现空格 </span>
    <span class="token property">&quot;no-trailing-spaces&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁用行尾空格 </span>
    <span class="token property">&quot;no-undef&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁用未声明的变量，除非它们在 /global / 注释中被提到 </span>
    <span class="token property">&quot;no-undef-init&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止将变量初始化为 undefined </span>
    <span class="token property">&quot;no-unmodified-loop-condition&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁用一成不变的循环条件 </span>
    <span class="token property">&quot;no-unused-vars&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 禁止出现未使用过的变量 </span>
      <span class="token property">&quot;vars&quot;</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;no-useless-call&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止不必要的 .call() 和 .apply() </span>
    <span class="token property">&quot;no-whitespace-before-property&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 禁止属性前有空白 </span>
    <span class="token property">&quot;one-var&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 强制函数中的变量要么一起声明要么分开声明 </span>
      <span class="token property">&quot;initialized&quot;</span><span class="token operator">:</span> <span class="token string">&quot;never&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;operator-linebreak&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;after&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 强制操作符使用一致的换行符 </span>
      <span class="token property">&quot;overrides&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;?&quot;</span><span class="token operator">:</span> <span class="token string">&quot;before&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;:&quot;</span><span class="token operator">:</span> <span class="token string">&quot;before&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;quotes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;single&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 强制使用一致的反勾号、双引号或单引号 </span>
      <span class="token property">&quot;avoidEscape&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;allowTemplateLiterals&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;semi&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;never&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 要求或禁止使用分号而不是 ASI </span>
    <span class="token property">&quot;semi-spacing&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 强制分号之前和之后使用一致的空格 </span>
      <span class="token property">&quot;before&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;after&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;space-in-parens&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;never&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 强制在圆括号内使用一致的空格</span>
    <span class="token property">&quot;space-infix-ops&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 要求操作符周围有空格 </span>
    <span class="token property">&quot;space-unary-ops&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">//强制在一元操作符前后使用一致的空格 </span>
      <span class="token property">&quot;words&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;nonwords&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;spaced-comment&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;always&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">//强制在注释中 // 或 /* 使用一致的空格</span>
      <span class="token property">&quot;markers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;global&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;globals&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;eslint&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;eslint-disable&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*package&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="取消eslint校验"><a href="#取消eslint校验" class="header-anchor">#</a> 取消ESLint校验</h3> <p>如果你不想使用 ESLint 校验（不推荐取消），只要找到 <a href="https://github.com/fx-mobile/vue-template/blob/master/vue.config.js" target="_blank" rel="noopener noreferrer">vue.config.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 文件。 进行如下设置 <code>lintOnSave: false</code> 即可。</p> <blockquote><p>框架默认只对开发环境进行校验，其它环境不做校验。</p></blockquote> <h2 id="ajax封装"><a href="#ajax封装" class="header-anchor">#</a> ajax封装</h2> <p>在和后台交互获取数据这块，框架使用的是axios库，它是基于promise的http库，  可运行在浏览器端和node.js中。他有很多优秀的特性，例如拦截请求和响应、取消请求、转换json、客户端防御XSRF等。  如果还对axios不了解的，可以移步<a href="https://link.zhihu.com/?target=https%3A//link.juejin.im/%3Ftarget%3Dhttps%3A%2F%2Fwww.npmjs.com%2Fpackage%2Faxios" target="_blank" rel="noopener noreferrer">axios文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <blockquote><p>框架已集成并封装了这axios，可以直接使用</p></blockquote> <h3 id="请求拦截"><a href="#请求拦截" class="header-anchor">#</a> 请求拦截</h3> <div class="language-text extra-class"><pre class="language-text"><code>// 先导入vuex,因为我们要使用到里面的状态对象
// vuex的路径根据自己的路径去写
import store from '@/store/index';

// 请求拦截器axios.interceptors.request.use(
    config =&gt; {
        // 每次发送请求之前判断vuex中是否存在token
        // 如果存在，则统一在http请求的header都加上token，这样后台根据token判断你的登录情况
        // 即使本地存在token，也有可能token是过期的，所以在响应拦截器中要对返回状态进行判断
        const token = store.state.token;
        token &amp;&amp; (config.headers.Authorization = token);
        return config;
    },
    error =&gt; {
        return Promise.error(error);
})
</code></pre></div><h3 id="响应拦截"><a href="#响应拦截" class="header-anchor">#</a> 响应拦截</h3> <div class="language-text extra-class"><pre class="language-text"><code>// 响应拦截器
axios.interceptors.response.use(
    response =&gt; {
        // 如果返回的状态码为200，说明接口请求成功，可以正常拿到数据
        // 否则的话抛出错误
        if (response.status === 200) {
            return Promise.resolve(response);
        } else {
            return Promise.reject(response);
        }
    },
    // 服务器状态码不是2开头的的情况
    // 这里可以跟你们的后台开发人员协商好统一的错误状态码
    // 然后根据返回的状态码进行一些操作，例如登录过期提示，错误提示等等
    // 下面列举几个常见的操作，其他需求可自行扩展
    error =&gt; {
        if (error.response.status) {
            switch (error.response.status) {
                // 401: 未登录
                // 未登录则跳转登录页面，并携带当前页面的路径
                // 在登录成功后返回当前页面，这一步需要在登录页操作。
                case 401:
                    router.replace({
                        path: '/login',
                        query: {
                            redirect: router.currentRoute.fullPath
                        }
                    });
                    break;

                // 403 token过期
                // 登录过期对用户进行提示
                // 清除本地token和清空vuex中token对象
                // 跳转登录页面
                case 403:
                      Toast({
                        message: '登录过期，请重新登录',
                        duration: 1000,
                        forbidClick: true
                    });
                    // 清除token
                    localStorage.removeItem('token');
                    store.commit('loginSuccess', null);
                    // 跳转登录页面，并将要浏览的页面fullPath传过去，登录成功后跳转需要访问的页面
                    setTimeout(() =&gt; {
                        router.replace({
                            path: '/login',
                            query: {
                                redirect: router.currentRoute.fullPath
                            }
                        });
                    }, 1000);
                    break;

                // 404请求不存在
                case 404:
                    Toast({
                        message: '网络请求不存在',
                        duration: 1500,
                        forbidClick: true
                    });
                    break;
                // 其他错误，直接抛出错误提示
                default:
                    Toast({
                        message: error.response.data.message,
                        duration: 1500,
                        forbidClick: true
                    });
            }
            return Promise.reject(error.response);
        }
    }
});
</code></pre></div><h3 id="封装get和post方法"><a href="#封装get和post方法" class="header-anchor">#</a> 封装get和post方法</h3> <p>开发过程中常用的ajax请求方法有get、post、put等方法。axios对应的也有很多类似的方法，不清楚的可以看下文档。但是为了简化我们的代码，框架还是要对其进行一个简单的封装。下面我们主要封装两个方法：get和post。</p> <p><strong>get方法</strong>：我们通过定义一个get函数，get函数有两个参数，第一个参数表示我们要请求的url地址，第二个参数是我们要携带的请求参数。get函数返回一个promise对象，当axios其请求成功时resolve服务器返回 值，请求失败时reject错误值。最后通过export抛出get函数。</p> <div class="language-text extra-class"><pre class="language-text"><code>/**
  * get方法，对应get请求
  * @param {String} url [请求的url地址]
  * @param {Object} params [请求时携带的参数]
  */
export function get(url, params){
    return new Promise((resolve, reject) =&gt;{
        axios.get(url, {
            params: params
        }).then(res =&gt; {
            resolve(res.data);
        }).catch(err =&gt;{
            reject(err.data)
    })
});}
</code></pre></div><p>**post方法：**原理同get基本一样。</p> <div class="language-text extra-class"><pre class="language-text"><code>/**
  * post方法，对应post请求
  * @param {String} url [请求的url地址]
  * @param {Object} params [请求时携带的参数]
  */
export function post(url, params) {
    return new Promise((resolve, reject) =&gt; {
          axios.post(url, QS.stringify(params))
        .then(res =&gt; {
            resolve(res.data);
        })
        .catch(err =&gt;{
            reject(err.data)
        })
    });
}
</code></pre></div><h1 id="高级组件-（持续完善中）"><a href="#高级组件-（持续完善中）" class="header-anchor">#</a> 高级组件 （持续完善中）</h1> <h2 id="高级表格"><a href="#高级表格" class="header-anchor">#</a> 高级表格</h2> <h2 id="拖放组件"><a href="#拖放组件" class="header-anchor">#</a> 拖放组件</h2> <h2 id="图表组件"><a href="#图表组件" class="header-anchor">#</a> 图表组件</h2> <h2 id="树形控件"><a href="#树形控件" class="header-anchor">#</a> 树形控件</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/framwork/vue/" class="prev router-link-active">ttk-vue</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fdb74c2a.js" defer></script><script src="/assets/js/2.5ecf9cd9.js" defer></script><script src="/assets/js/3.f9d13812.js" defer></script>
  </body>
</html>
